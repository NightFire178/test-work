(this["webpackJsonptest-work"]=this["webpackJsonptest-work"]||[]).push([[0],{141:function(e,t,n){"use strict";n.r(t);var c,a=n(0),r=n.n(a),s=n(8),i=n.n(s),o=n(40),j=n(11),u=n(17),l=n(94),b=n(12),d=function(e){return e.appState.darkMode},h=function(e){return e.appState.authStatus},O=function(e){return e.appState.chatSocket},m=n(2),x=function(e){var t=e.component,n=Object(l.a)(e,["component"]),c=Object(b.c)(h);return Object(m.jsx)(j.b,Object(u.a)(Object(u.a)({},n),{},{render:function(e){return c?Object(m.jsx)(t,Object(u.a)({},e)):Object(m.jsx)(j.a,{to:"/login"})}}))},p=n(32),f=n(176),g=n(180),v=n(181),k=n(183),S=n(184),y=n(173),w=Object(y.a)((function(e){return{container:{marginTop:"10%"},paperContainer:{padding:"30px"}}})),N=n(178),C=n(179);!function(e){e.SetDarkMode="SET_THEME",e.SetAuthStatus="SET_AUTH_STATUS",e.SetUserName="SET_USER_NAME",e.SetChatSocket="SET_CHAT_SOCKET"}(c||(c={}));var _,R,M=function(e){return{type:c.SetDarkMode,payload:e}},T=function(e){return{type:c.SetAuthStatus,payload:e}},F=Object(y.a)((function(e){return{icon:{marginTop:"6px","&:hover":{cursor:"pointer"}}}})),U=function(e){var t=F(),n=Object(b.b)(),c=Object(b.c)(d),a=function(){n(M(!c))};return Object(m.jsx)(f.a,{className:t.icon,item:!0,children:c?Object(m.jsx)(N.a,{onClick:a}):Object(m.jsx)(C.a,{onClick:a})})},E=function(){var e=Object(b.c)(O),t=Object(a.useState)(!1),n=Object(p.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)({status:!1,uri:""}),i=Object(p.a)(s,2),o=i[0],u=i[1],l=w(),d=Object(a.useRef)(),h=Object(a.useRef)(),x=Object(b.b)(),y=Object(a.useCallback)((function(){var t=d.current,n="0";c&&(n=h.current.value.split("/chat/")[1]);e.joinRoom({id:n,name:t.value},(function(n){var c=n.status,a=n.id;c&&(x(T(!0)),e.setUserName(t.value),u({status:!0,uri:"/chat/".concat(a)})),e.joinRoomDisconnect()}))}),[x,e,c]);return o.status?Object(m.jsx)(j.a,{to:o.uri}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(f.a,{className:l.container,container:!0,justify:"center",children:Object(m.jsx)(g.a,{maxWidth:"sm",children:Object(m.jsx)(v.a,{children:Object(m.jsxs)(f.a,{className:l.paperContainer,container:!0,direction:"column",alignItems:"center",spacing:4,children:[c?Object(m.jsx)(f.a,{item:!0,children:Object(m.jsx)(k.a,{inputRef:h,variant:"filled",placeholder:"your friend's link",autoFocus:!0,required:!0,color:"primary"})}):Object(m.jsx)(S.a,{onClick:function(){return r(!0)},size:"small",children:"join friends chat"}),Object(m.jsx)(f.a,{item:!0,children:Object(m.jsx)(k.a,{inputRef:d,size:"small",variant:"outlined",placeholder:"name",autoFocus:!0,required:!0,color:"primary"})}),Object(m.jsx)(f.a,{item:!0,children:Object(m.jsxs)(f.a,{container:!0,spacing:4,children:[Object(m.jsx)(f.a,{item:!0,children:Object(m.jsx)(S.a,{onClick:y,children:"create chat"})}),Object(m.jsx)(U,{})]})})]})})})})})},A=Object(y.a)((function(){return{paper:{marginTop:"3vh",padding:"2vh"},gridContainer:{minHeight:"90vh"},mainWindow:{width:"90%"},window:{height:"80vh",padding:"2vh 0"},content:{padding:"0 2vh",height:"78vh",overflow:"auto"},input:{width:"100%"},buttonUrl:{whiteSpace:"nowrap"}}})),z=function(e){var t=e.size,n=e.children,c=A();return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(f.a,{item:!0,xs:t,children:Object(m.jsx)(v.a,{className:c.window,children:Object(m.jsx)("div",{className:c.content,children:n})})})})},D=function(e){var t=Object(b.c)(O),n=Object(a.useState)([]),c=Object(p.a)(n,2),s=c[0],i=c[1];return Object(a.useEffect)((function(){var e=[];t.listenChat((function(t){var n=t.message,c=t.userName;e.push({message:n,userName:c}),console.log(e),e.length&&i(e.map((function(e,t){return Object(m.jsx)(r.a.Fragment,{children:Object(m.jsxs)("div",{children:[e.userName,":",e.message]})},t)})))}))}),[]),Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(z,{size:9,children:s})})},H=function(e){var t=Object(b.c)(O),n=Object(a.useState)(),c=Object(p.a)(n,2),s=c[0],i=c[1];return Object(a.useEffect)((function(){t.listenUserList((function(e){i(e.map((function(e,t){return Object(m.jsx)(r.a.Fragment,{children:Object(m.jsx)("div",{children:e})},e+t)})))}))}),[t]),Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(z,{size:3,children:s})})},L=function(e){var t=A(),n=Object(a.useRef)(),c=Object(b.c)(O),r=Object(a.useCallback)((function(){var e=n.current;(null===e||void 0===e?void 0:e.value)&&(c.sendChatMessage(e.value),e.value="")}),[c]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(f.a,{item:!0,xs:3,sm:7,lg:9,children:Object(m.jsx)(k.a,{inputRef:n,className:t.input,size:"small",placeholder:"you message",required:!0,color:"primary"})}),Object(m.jsx)(f.a,{item:!0,xs:3,sm:1,lg:1,children:Object(m.jsx)(S.a,{onClick:r,children:"send"})}),Object(m.jsx)(f.a,{item:!0,xs:6,sm:3,lg:2,children:Object(m.jsx)(f.a,{container:!0,children:Object(m.jsx)(f.a,{item:!0,xs:6,children:Object(m.jsx)(U,{})})})})]})},W=function(e){var t=A();return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(g.a,{maxWidth:"lg",children:Object(m.jsx)(v.a,{className:t.paper,children:Object(m.jsxs)(f.a,{className:t.gridContainer,container:!0,justify:"space-between",alignItems:"center",alignContent:"center",spacing:2,children:[Object(m.jsx)(D,{}),Object(m.jsx)(H,{}),Object(m.jsx)(L,{})]})})})})},q=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(o.a,{children:Object(m.jsxs)(j.d,{children:[Object(m.jsx)(j.b,{path:"/",exact:!0,component:E}),Object(m.jsx)(x,{path:"/chat/:id?",exact:!0,component:W}),Object(m.jsx)(j.b,{render:function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("h1",{children:["404.",Object(m.jsx)("br",{}),Object(m.jsx)("small",{children:"Page not found"})]}),Object(m.jsx)(o.b,{to:"/",children:"Go to main page"})]})}})]})})})},I=n(29),J=n(89),B=n(90),G=n(91),K=n(92);!function(e){e.server="localhost:3500"}(_||(_={})),function(e){e.joinRom="join-room",e.listenChat="chat",e.listenUserList="user-list",e.sendMessage="chat-message"}(R||(R={}));var P={darkMode:!1,authStatus:!1,userName:"",chatSocket:new(function(){function e(){Object(B.a)(this,e),this._socket=void 0,this._userName=void 0,this._socket=Object(K.io)(_.server),this._userName="admin"}return Object(G.a)(e,[{key:"setUserName",value:function(e){this._userName=e}},{key:"userCall",value:function(e){this._socket.emit("callUser",e)}},{key:"sendChatMessage",value:function(e){this._socket.emit(R.sendMessage,{userName:this._userName,message:e})}},{key:"joinRoom",value:function(e,t){var n=e.id,c=e.name;this._socket.emit(R.joinRom,{id:n,name:c}),this._socket.on(R.joinRom,t)}},{key:"joinRoomDisconnect",value:function(){this._socket.off(R.joinRom)}},{key:"listenChat",value:function(e){this._socket.on(R.listenChat,e)}},{key:"listenUserList",value:function(e){this._socket.on(R.listenUserList,e)}},{key:"disconnect",value:function(){this._socket.connected&&this._socket.disconnect()}}]),e}())};var Q=Object(I.combineReducers)({appState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.SetDarkMode:return Object(u.a)(Object(u.a)({},e),{},{darkMode:t.payload});case c.SetAuthStatus:return Object(u.a)(Object(u.a)({},e),{},{authStatus:t.payload});case c.SetUserName:return Object(u.a)(Object(u.a)({},e),{},{userName:t.payload});default:return e}}}),V=Object(I.createStore)(Q,Object(J.composeWithDevTools)());V.dispatch(M(window.matchMedia("(prefers-color-scheme:dark)").matches));var X=V,Y=n(93),Z=n(182),$=n(53),ee={primary:{light:$.a[400],main:$.a[700],dark:$.a[900]}},te={},ne=function(e){var t=e.children,n=Object(b.c)(d),c=r.a.useMemo((function(){return Object(Y.a)({palette:Object(u.a)({type:n?"dark":"light"},n?ee:te)})}),[n]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("style",{children:"\n      body {\n        background: ".concat(n?"darkslategray":"#e9ebee",";\n      }\n      /* width */\n      ::-webkit-scrollbar {\n         width: 10px;\n      }\n\n      /* Track */\n      ::-webkit-scrollbar-track {\n         background: ").concat(n?"#555":"gray","; \n      }\n \n      /* Handle */\n      ::-webkit-scrollbar-thumb {\n         background: ").concat(n?"gray":"#633f28","; \n      }\n\n       /* Handle on hover */\n      ::-webkit-scrollbar-thumb:hover {\n         background: ").concat(n?"#8a3324":"#cd793b","\n\n      }\n    ")}),Object(m.jsx)(Z.a,{theme:c,children:t})]})};i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(b.a,{store:X,children:Object(m.jsx)(ne,{children:Object(m.jsx)(q,{})})})}),document.getElementById("root"))}},[[141,1,2]]]);
//# sourceMappingURL=main.f38c7a01.chunk.js.map